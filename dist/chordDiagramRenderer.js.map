{"version":3,"sources":["../src/chordDiagramRenderer.js"],"names":["renderChordDiagram","container","chordDiagramDivId","w","h","data","drawChords","matrix","mmap","r1","r0","console","log","fill","d3","scale","ordinal","range","chord","layout","padding","sortSubgroups","descending","sortChords","arc","svg","innerRadius","outerRadius","select","append","attr","rdr","chordRdr","g","selectAll","groups","enter","on","mouseover","d","style","gname","each","angle","startAngle","endAngle","Math","PI","text","chordPaths","chords","rgb","sname","darker","radius","html","chordTip","event","pageY","pageX","p","format","q","tname","svalue","stotal","mtotal","tvalue","ttotal","groupTip","gvalue","i","classed","source","index","target","build","mpr","chordMpr","addValuesToMap","setFilter","row","a","b","importer1","name","importer2","setAccessor","recs","flow1","flow2","getMatrix","getMap","_"],"mappings":"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","file":"chordDiagramRenderer.js","sourcesContent":["import _ from 'lodash';\nimport * as d3 from './external/d3.v3.min';\nimport chordMpr from './chordDataMapper';\nimport chordRdr from './chordDataReader';\n\nexport default function renderChordDiagram(container, chordDiagramDivId, w, h) {\n\n  var data = [{\"year\":\"2009\",\"importer1\":\"Antigua & Barbuda\",\"importer2\":\"Argentina\",\"flow1\":\".41\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Antigua & Barbuda\",\"importer2\":\"Andorra\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Antigua & Barbuda\",\"importer2\":\"Austria\",\"flow1\":\".23\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Antigua & Barbuda\",\"importer2\":\"Albania\",\"flow1\":\"7.60e-11\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Antigua & Barbuda\",\"importer2\":\"Armenia\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Antigua & Barbuda\",\"importer2\":\"Azerbaijan\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Antigua & Barbuda\",\"importer2\":\"Angola\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Antigua & Barbuda\",\"importer2\":\"Algeria\",\"flow1\":\"3.07e-12\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Antigua & Barbuda\",\"importer2\":\"Afghanistan\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Antigua & Barbuda\",\"importer2\":\"Australia\",\"flow1\":\".37\",\"flow2\":\".25\"},{\"year\":\"2009\",\"importer1\":\"Argentina\",\"importer2\":\"Andorra\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Argentina\",\"importer2\":\"Austria\",\"flow1\":\"139.02\",\"flow2\":\"103.74\"},{\"year\":\"2009\",\"importer1\":\"Argentina\",\"importer2\":\"Albania\",\"flow1\":\".01\",\"flow2\":\"10.13\"},{\"year\":\"2009\",\"importer1\":\"Argentina\",\"importer2\":\"Armenia\",\"flow1\":\".12\",\"flow2\":\"3.11\"},{\"year\":\"2009\",\"importer1\":\"Argentina\",\"importer2\":\"Azerbaijan\",\"flow1\":\".12\",\"flow2\":\"19.94\"},{\"year\":\"2009\",\"importer1\":\"Argentina\",\"importer2\":\"Angola\",\"flow1\":\"0\",\"flow2\":\"180.11\"},{\"year\":\"2009\",\"importer1\":\"Argentina\",\"importer2\":\"Algeria\",\"flow1\":\".09\",\"flow2\":\"807.4\"},{\"year\":\"2009\",\"importer1\":\"Argentina\",\"importer2\":\"Afghanistan\",\"flow1\":\"0\",\"flow2\":\"2.71\"},{\"year\":\"2009\",\"importer1\":\"Argentina\",\"importer2\":\"Australia\",\"flow1\":\"183.31\",\"flow2\":\"314.03\"},{\"year\":\"2009\",\"importer1\":\"Andorra\",\"importer2\":\"Austria\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Andorra\",\"importer2\":\"Albania\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Andorra\",\"importer2\":\"Armenia\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Andorra\",\"importer2\":\"Azerbaijan\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Andorra\",\"importer2\":\"Angola\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Andorra\",\"importer2\":\"Algeria\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Andorra\",\"importer2\":\"Afghanistan\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Andorra\",\"importer2\":\"Australia\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Austria\",\"importer2\":\"Albania\",\"flow1\":\"73.58\",\"flow2\":\"90.68\"},{\"year\":\"2009\",\"importer1\":\"Austria\",\"importer2\":\"Armenia\",\"flow1\":\".95\",\"flow2\":\"57.43\"},{\"year\":\"2009\",\"importer1\":\"Austria\",\"importer2\":\"Azerbaijan\",\"flow1\":\"51.25\",\"flow2\":\"63.42\"},{\"year\":\"2009\",\"importer1\":\"Austria\",\"importer2\":\"Angola\",\"flow1\":\".02\",\"flow2\":\"38.73\"},{\"year\":\"2009\",\"importer1\":\"Austria\",\"importer2\":\"Algeria\",\"flow1\":\"58.31\",\"flow2\":\"266.41\"},{\"year\":\"2009\",\"importer1\":\"Austria\",\"importer2\":\"Afghanistan\",\"flow1\":\".02\",\"flow2\":\"11.92\"},{\"year\":\"2009\",\"importer1\":\"Austria\",\"importer2\":\"Australia\",\"flow1\":\"58.37\",\"flow2\":\"888.65\"},{\"year\":\"2009\",\"importer1\":\"Albania\",\"importer2\":\"Armenia\",\"flow1\":\".42\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Albania\",\"importer2\":\"Azerbaijan\",\"flow1\":\"3.01\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Albania\",\"importer2\":\"Angola\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Albania\",\"importer2\":\"Algeria\",\"flow1\":\"0\",\"flow2\":\"1.13\"},{\"year\":\"2009\",\"importer1\":\"Albania\",\"importer2\":\"Afghanistan\",\"flow1\":\"0\",\"flow2\":\"2.25\"},{\"year\":\"2009\",\"importer1\":\"Albania\",\"importer2\":\"Australia\",\"flow1\":\"1.14\",\"flow2\":\".23\"},{\"year\":\"2009\",\"importer1\":\"Armenia\",\"importer2\":\"Azerbaijan\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Armenia\",\"importer2\":\"Angola\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Armenia\",\"importer2\":\"Algeria\",\"flow1\":\".3\",\"flow2\":\".04\"},{\"year\":\"2009\",\"importer1\":\"Armenia\",\"importer2\":\"Afghanistan\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Armenia\",\"importer2\":\"Australia\",\"flow1\":\"3.41\",\"flow2\":\".69\"},{\"year\":\"2009\",\"importer1\":\"Azerbaijan\",\"importer2\":\"Angola\",\"flow1\":\"0\",\"flow2\":\".02\"},{\"year\":\"2009\",\"importer1\":\"Azerbaijan\",\"importer2\":\"Algeria\",\"flow1\":\"0\",\"flow2\":\".38\"},{\"year\":\"2009\",\"importer1\":\"Azerbaijan\",\"importer2\":\"Afghanistan\",\"flow1\":\".02\",\"flow2\":\"63.34\"},{\"year\":\"2009\",\"importer1\":\"Azerbaijan\",\"importer2\":\"Australia\",\"flow1\":\"5.71\",\"flow2\":\"147.18\"},{\"year\":\"2009\",\"importer1\":\"Angola\",\"importer2\":\"Algeria\",\"flow1\":\"1.4\",\"flow2\":\".05\"},{\"year\":\"2009\",\"importer1\":\"Angola\",\"importer2\":\"Afghanistan\",\"flow1\":\"0\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Angola\",\"importer2\":\"Australia\",\"flow1\":\"9.18\",\"flow2\":\".03\"},{\"year\":\"2009\",\"importer1\":\"Algeria\",\"importer2\":\"Afghanistan\",\"flow1\":\"1.2\",\"flow2\":\"0\"},{\"year\":\"2009\",\"importer1\":\"Algeria\",\"importer2\":\"Australia\",\"flow1\":\"41.27\",\"flow2\":\"132.45\"},{\"year\":\"2009\",\"importer1\":\"Afghanistan\",\"importer2\":\"Australia\",\"flow1\":\"25.27\",\"flow2\":\".18\"}];\n\n\n      function drawChords (matrix, mmap) {\n        var r1 = h / 2, r0 = r1 - 110;\n        console.log(\"width: \" + w + \" height: \" + h + \" chordDiagramDivId: \" + chordDiagramDivId);\n\n        var fill = d3.scale.ordinal()\n            .range(['#c7b570','#c6cdc7','#335c64','#768935','#507282','#5c4a56','#aa7455','#574109','#837722','#73342d','#0a5564','#9c8f57','#7895a4','#4a5456','#b0a690','#0a3542',]);\n\n        var chord = d3.layout.chord()\n            .padding(0.02)\n            .sortSubgroups(d3.descending)\n            .sortChords(d3.descending);\n\n        var arc = d3.svg.arc()\n            .innerRadius(r0)\n            .outerRadius(r0 + 20);\n\n        var svg = d3.select(container).append(\"svg:svg\")\n            .attr(\"width\", w)\n            .attr(\"height\", h)\n            .append(\"svg:g\")\n            .attr(\"id\", \"circle\")\n            .attr(\"transform\", \"translate(\" + w / 2 + \",\" + h / 2 + \")\");\n\n            svg.append(\"circle\")\n                .attr(\"r\", r0 + 20);\n\n        var rdr = chordRdr(matrix, mmap);\n        chord.matrix(matrix);\n\n        var g = svg.selectAll(\"g.group\")\n            .data(chord.groups())\n          .enter().append(\"svg:g\")\n            .attr(\"class\", \"group\")\n            .on(\"mouseover\", mouseover)\n            .on(\"mouseout\", function (d) { \n              d3.select(\".grafana-d3-chord-diagram-tooltip\").style(\"visibility\", \"hidden\"); \n            });\n\n        g.append(\"svg:path\")\n            .style(\"stroke\", \"black\")\n            .style(\"fill\", function(d) { \n              return fill(rdr(d).gname); \n            })\n            .attr(\"d\", arc);\n\n        g.append(\"svg:text\")\n            .each(function(d) { d.angle = (d.startAngle + d.endAngle) / 2; })\n            .attr(\"dy\", \".35em\")\n            .style(\"font-family\", \"helvetica, arial, sans-serif\")\n            .style(\"font-size\", \"9px\")\n            .style(\"fill\", \"white\")\n            .attr(\"text-anchor\", function(d) { return d.angle > Math.PI ? \"end\" : null; })\n            .attr(\"transform\", function(d) {\n              return \"rotate(\" + (d.angle * 180 / Math.PI - 90) + \")\" + \n                \"translate(\" + (r0 + 26) + \")\" + (d.angle > Math.PI ? \"rotate(180)\" : \"\");\n            })\n            .text(function(d) { return rdr(d).gname; });\n\n          var chordPaths = svg.selectAll(\"path.chord\")\n                .data(chord.chords())\n              .enter().append(\"svg:path\")\n                .attr(\"class\", \"chord\")\n                .style(\"stroke\", function(d) { \n                  return d3.rgb(fill(rdr(d).sname)).darker(); \n                })\n                .style(\"fill\", function(d) { \n                  return fill(rdr(d).sname);\n                })\n                .attr(\"d\", d3.svg.chord().radius(r0))\n                .on(\"mouseover\", function (d) {\n                  d3.select(\".grafana-d3-chord-diagram-tooltip\")\n                    .style(\"visibility\", \"visible\")\n                    .html(chordTip(rdr(d)))\n                    .style(\"top\", function () { \n                      return (event.pageY - 170)+\"px\";\n                    })\n                    .style(\"left\", function () { \n                      return (event.pageX - 100)+\"px\";\n                    });\n                })\n                .on(\"mouseout\", function (d) { \n                  d3.select(\".grafana-d3-chord-diagram-tooltip\").style(\"visibility\", \"hidden\"); \n                });\n\n          function chordTip (d) {\n            console.log(\"Display tooltip\");\n            var p = d3.format(\".1%\"), q = d3.format(\",.2f\");\n            return \"Chord Info:<br/>\" +  d.sname + \" imports from \" + \n              d.tname + \": $\" + q(d.svalue) + \"M<br/>\" + \n              p(d.svalue/d.stotal) + \" of \" + d.sname + \"'s Total ($\" + q(d.stotal) + \"M)<br/>\" + \n              p(d.svalue/d.mtotal) + \" of Matrix Total ($\" + q(d.mtotal) + \"M)<br/>\" + \"<br/>\" + \n              d.tname + \" imports from \" + d.sname + \": $\" + q(d.tvalue) + \"M<br/>\" + \n              p(d.tvalue/d.ttotal) + \" of \" + d.tname + \"'s Total ($\" + q(d.ttotal) + \"M)<br/>\" + \n              p(d.tvalue/d.mtotal) + \" of Matrix Total ($\" + q(d.mtotal) + \"M)\";\n          }\n\n          function groupTip (d) {\n            var p = d3.format(\".1%\"), q = d3.format(\",.2f\");\n            return \"Group Info:<br/>\" + d.gname + \" : \" + q(d.gvalue) + \"M<br/>\" + \n              p(d.gvalue/d.mtotal) + \" of Matrix Total (\" + q(d.mtotal) + \"M)\";\n          }\n\n          function mouseover(d, i) {\n            d3.select(\".grafana-d3-chord-diagram-tooltip\")\n              .style(\"visibility\", \"visible\")\n              .html(groupTip(rdr(d)))\n              .style(\"top\", function () { \n                return (event.pageY - 80)+\"px\";\n              })\n              .style(\"left\", function () { \n                return (event.pageX - 130)+\"px\";\n              });\n\n            chordPaths.classed(\"fade\", function(p) {\n              return p.source.index != i && p.target.index != i;\n            });\n          }\n      }\n\n  function build() {\n        var mpr = chordMpr(data);\n        mpr\n          .addValuesToMap('importer1')\n          .addValuesToMap('importer2')\n          .setFilter(function (row, a, b) {\n            return (row.importer1 === a.name && row.importer2 === b.name) ||\n                   (row.importer1 === b.name && row.importer2 === a.name);\n          })\n          .setAccessor(function (recs, a, b) {\n            if (!recs[0]) return 0;\n              return recs[0].importer1 === a.name ? +recs[0].flow1 : +recs[0].flow2; \n          });\n        return drawChords(mpr.getMatrix(), mpr.getMap());\n  }\n\n  return build();\n} "]}